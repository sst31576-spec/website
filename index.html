<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KingGen Web</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="/assets/logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="login-container" class="view-container">
        <div class="card-box">
            <img src="/assets/logo.png" alt="Logo" class="logo">
            <h1>Welcome to KingGen HUB</h1>
            <p>Please connect with Discord to continue.</p>
            <a href="/auth/discord" class="discord-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" class="icon"><path fill="currentColor" d="M20.317 4.431c-1.457-.793-3.04-1.28-4.707-1.42-.14.417-.27.83-.393 1.243-1.84-.277-3.72-.277-5.552 0-.12-.413-.253-.826-.394-1.243-1.667.14-3.25.627-4.707 1.42C.843 7.85.19 11.537.006 15.356c1.782.977 3.6 1.42 5.456 1.348.14-.56.287-1.12.44-1.67-1.353-.35-2.65-.853-3.86-1.5-.087-2.923.4-5.693 1.5-7.793 1.32-.477 2.673-.626 4.02-.476.447 1.423.894 2.846 1.34 4.27.3.943.6 1.887.9 2.83-1.62.35-3.227.85-4.793 1.5.213.417.427.833.64 1.25 1.767-.56 3.52-.85 5.274-.85.93 0 1.86.14 2.78.42.7.35 1.38.79 2.05 1.33.2-.41.38-.82.56-1.226 1.565.087 3.13.477 4.638 1.133.08-2.05-.14-4.1-.64-6.1.03-.03.05-.05.08-.08a12.1 12.1 0 0 0-1.04-1.42zM8.02 13.062c-.894 0-1.62-.803-1.62-1.787 0-.984.726-1.787 1.62-1.787.893 0 1.62.803 1.62 1.787.001.984-.727 1.787-1.62 1.787zm7.96 0c-.893 0-1.62-.803-1.62-1.787 0-.984.727-1.787 1.62-1.787.893 0 1.62.803 1.62 1.787 0 .984-.727 1.787-1.62 1.787z"></path></svg>
                <span>Connect with Discord</span>
            </a>
            <div id="login-error-message" class="error-message"></div>
        </div>
    </div>

    <div id="main-app" class="view-container hidden">
        <header class="top-bar">
            <div class="top-bar-left">
                <img src="/assets/logo.png" alt="Logo" class="header-logo">
                <nav>
                    <a href="/" class="nav-link active" data-page="home">Home</a>
                    <a href="/get-key" class="nav-link" data-page="get-key">Get Key</a>
                    <a href="/suggestion" class="nav-link" data-page="suggestion">Suggestion</a>
                    <a href="Perm key - Roblox" class="nav-link">Buy Perm</a>
                </nav>
            </div>
            <div class="top-bar-right">
                <div class="user-profile" id="user-profile-toggle">
                    <img id="user-avatar" src="" alt="Avatar">
                    <span id="user-name"></span>
                    <span id="user-status-badge" class="status-badge"></span>
                </div>
                <div class="dropdown-content" id="dropdown-menu">
                    <a href="/manage-keys" id="manage-keys-link" class="nav-link hidden" data-page="manage-keys">Manage Keys</a>
                    <a href="/auth/logout">Disconnect</a>
                </div>
            </div>
        </header>

        <main class="content">
            <div id="page-home" class="page">
                <div class="card-box">
                    <h2>Welcome to the KingGen HUB!</h2>
                    <p>This is your central place to get and manage your keys for our scripts.</p>
                    <h3>How It Works</h3>
                    <ul>
                        <li><strong>Connect:</strong> You must be connected with your Discord account and be a member of our server to access the hub.</li>
                        <li><strong>Get Key:</strong> Navigate to the "Get Key" page.
                            <ul>
                                <li><strong>Free Users:</strong> You will need to complete a Linkvertise task to receive a temporary key, valid for 24 hours.</li>
                                <li><strong>Perm Users:</strong> You can generate a permanent key linked to your Roblox account.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div id="page-get-key" class="page hidden">
                <div class="card-box">
                    <h2>Get Your Key</h2>
                    <div id="key-generation-content"></div>
                </div>
            </div>

            <div id="page-suggestion" class="page hidden">
                <div class="card-box">
                    <h2>Suggestions</h2>
                    <p>Have an idea to improve our script? Let us know below!</p>
                    <form id="suggestion-form">
                        <textarea id="suggestion-textarea" placeholder="Type your suggestion here..." required></textarea>
                        <button type="submit" class="discord-btn">Send Suggestion</button>
                        <div id="suggestion-status" class="status-message"></div>
                    </form>
                </div>
            </div>
            
            <div id="page-manage-keys" class="page hidden">
                <div class="card-box" style="max-width: 900px; text-align: left;">
                    <h2>Manage Keys</h2>
                    <div id="admin-key-list"></div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
