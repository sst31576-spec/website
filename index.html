<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KingGen HUB</title>
    <link rel="stylesheet" href="style.css"> 
    <link rel="icon" href="/assets/logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="login-container" class="view-container">
        <div class="card-box">
            <img src="/assets/logo.png" alt="Logo" class="logo">
            <h1>Welcome to KingGen HUB</h1>
            <p>Please connect with Discord to continue.</p>
            <a href="/auth/discord" class="discord-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" class="icon"><path fill="currentColor" d="M20.317 4.431c-1.457-.793-3.04-1.28-4.707-1.42-.14.417-.27.83-.393 1.243-1.84-.277-3.72-.277-5.552 0-.12-.413-.253-.826-.394-1.243-1.667.14-3.25.627-4.707 1.42C2.96 6.307 2.056 8.583 2.056 11.235c0 6.007 3.585 1.57 3.585 1.57.18.237.408.385.67.43.087.017.173.027.26.027.29 0 .565-.11.777-.306 1.884-1.657 3.32-3.13 4.296-4.542.473-.687 1.054-1.373 1.636-2.07.61.8.877 1.764.79 2.723.23.23.47.47.72.71.077.07.15.14.23.21.09.07.18.13.28.19.46.28.98.43 1.5.43.09 0 .17-.01.26-.03.26-.04.49-.18.67-.43 0 0 3.585 4.437 3.585-1.57 0-2.652-.904-4.93-2.668-5.804z"/></svg>
                Connect with Discord
            </a>
            <p id="login-error-message" class="error-message hidden"></p>
        </div>
    </div>

    <div id="main-app" class="view-container hidden">
        <header class="top-bar">
            <div class="logo-container">
                <img src="/assets/logo.png" alt="Logo" class="header-logo">
                <h1 class="app-title">KingGen HUB</h1>
            </div>
            
            <nav class="nav-links">
                <a href="#page-home" class="nav-link active" data-page="page-home">Home</a>
                <a href="#page-get-key" class="nav-link" data-page="page-get-key">Get Key</a>
                <a href="#page-suggestion" class="nav-link" data-page="page-suggestion">Suggestions</a>
                <a href="#page-manage-keys" class="nav-link hidden" data-page="page-manage-keys" id="manage-keys-link">Admin</a>
            </nav>

            <div class="user-profile" id="user-profile-toggle">
                <span id="user-name"></span>
                <span id="user-status-badge" class="status-badge"></span>
                <img id="user-avatar" src="" alt="Avatar" class="avatar">
                <div class="dropdown-content" id="dropdown-menu">
                    <a href="#" id="logout-link">Logout</a>
                </div>
            </div>
        </header>

        <main class="content-area">
            
            <div id="page-home" class="page">
                <div class="card-box">
                    <h2>Welcome, <span id="home-username"></span>!</h2>
                    <p>Your current status is: <span id="home-user-status" class="status-badge"></span></p>
                    <p>Access the <a href="#page-get-key" class="nav-link">Get Key</a> page to obtain or check your key status.</p>
                </div>
            </div>

            <div id="page-get-key" class="page hidden">
                <div class="card-box">
                    <h2>Get Your Key</h2>
                    <div id="key-generation-content">
                        <p style="color: var(--text-muted); margin-bottom: 20px;">
                            Choose your method to obtain a free key (24h validity).
                        </p>
                        <button id="linkvertise-btn" class="discord-btn" style="background-color: var(--brand-blue); margin-bottom: 15px;">
                            ðŸ”‘ Get Key via Linkvertise
                        </button>
                        <button id="lootlabs-btn" class="discord-btn" style="background-color: var(--brand-red);">
                            ðŸ’° Get Key via LootLabs
                        </button>
                        <div id="key-status-message" class="status-message" style="margin-top: 20px;"></div>
                    </div>
                    <div id="key-display-content"></div> 
                </div>
            </div>

            <div id="page-suggestion" class="page hidden">
                <div class="card-box">
                    <h2>Suggestions</h2>
                    <p>Have an idea to improve our script? Let us know below!</p>
                    <form id="suggestion-form">
                        <input type="text" id="game-name-input" placeholder="Game Name (e.g., Blox Fruits)" required>
                        <input type="url" id="game-link-input" placeholder="Roblox Game Link (e.g., https://www.roblox.com/games/...)" required>
                        <textarea id="suggestion-textarea" placeholder="Type your detailed suggestion here..." required></textarea>
                        <button type="submit" class="discord-btn">Send Suggestion</button>
                        <div id="suggestion-status" class="status-message"></div>
                    </form>
                </div>
            </div>
            
            <div id="page-manage-keys" class="page hidden">
                <div class="card-box" style="max-width: 900px; text-align: left;">
                    <h2>Manage Keys</h2>
                    <div id="admin-key-list"></div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
