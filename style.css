<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KingGen Web</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="/assets/logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="login-container" class="view-container">
        <div class="card-box">
            <img src="/assets/logo.png" alt="Logo" class="logo">
            <h1>Welcome to KingGen HUB</h1>
            <p>Please connect with Discord to continue.</p>
            <a href="/auth/discord" class="discord-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" class="icon"><path fill="currentColor" d="M20.317 4.431c-1.457-.793-3.04-1.28-4.707-1.42-.14.417-.27.83-.393 1.243-1.84-.277-3.72-.277-5.552 0-.12-.413-.253-.826-.394-1.243-1.666.14-3.25.627-4.707 1.42-3.11 4.54-4.323 8.356-3.882 11.517.518 3.766 4.3 6.786 8.446 7.067.844.056 1.688.056 2.532 0 4.146-.28 7.928-3.3 8.446-7.067.44-3.16-1.31-6.977-3.88-11.517zM8.57 15.655c-.93 0-1.685-.815-1.685-1.812s.754-1.81 1.685-1.81c.93 0 1.685.815 1.685 1.81s-.754 1.812-1.685 1.812zm6.86 0c-.93 0-1.685-.815-1.685-1.812s.754-1.81 1.685-1.81c.93 0 1.685.815 1.685 1.81s-.754 1.812-1.685 1.812z\"/></svg>
                Sign in with Discord
            </a>
            <p id="login-error-message" class="status-message error hidden"></p>
        </div>
    </div>

    <div id="main-app" class="view-container hidden">
        <header class="top-bar">
            <div class="header-left">
                <img src="/assets/logo.png" alt="Logo" class="header-logo">
                <nav class="main-nav">
                    <a href="#" class="nav-link" data-page="page-home">Home</a>
                    <a href="#" class="nav-link" data-page="page-get-key">Get Key</a>
                    <a href="#" class="nav-link" data-page="page-suggestion">Suggestions</a>
                    <a href="#" class="nav-link hidden" id="manage-keys-link" data-page="page-manage-keys">Manage Keys</a>
                </nav>
            </div>
            <div class="user-profile-dropdown">
                <div class="user-info" id="user-profile-toggle">
                    <img id="user-avatar" alt="User Avatar" class="user-avatar">
                    <span id="user-name"></span>
                    <span id="user-status-badge" class="status-badge"></span>
                </div>
                <div class="dropdown-content" id="dropdown-menu">
                    <a href="#" id="reset-hwid-link">Reset HWID</a>
                    <a href="/auth/logout">Logout</a>
                </div>
            </div>
        </header>

        <main class="content-area">
            <div id="page-home" class="page">
                <div class="card-box">
                    <h2>Welcome, <span id="home-user-name">User</span>!</h2>
                    <p>Your current status is: <span id="home-user-status" class="status-badge">Loading...</span></p>
                    <p>Use the navigation bar to get your key, manage your access, or submit suggestions for new scripts.</p>
                </div>
            </div>

            <div id="page-get-key" class="page hidden">
                <div class="card-box">
                    <h2>Get Your Key</h2>
                    <div id="key-generation-content"></div>
                </div>
            </div>

            <div id="page-suggestion" class="page hidden">
                <div class="card-box">
                    <h2>Suggestions</h2>
                    <p>Have an idea to improve our script? Let us know below!</p>
                    <form id="suggestion-form">
                        <input type="text" id="game-name-input" placeholder="Game Name (e.g., Blox Fruits)" required>
                        <input type="url" id="game-link-input" placeholder="Roblox Game Link (e.g., https://www.roblox.com/games/...)" required>
                        <textarea id="suggestion-textarea" placeholder="Type your detailed suggestion here..." required></textarea>
                        <button type="submit" class="discord-btn">Send Suggestion</button>
                        <div id="suggestion-status" class="status-message"></div>
                    </form>
                </div>
            </div>
            
            <div id="page-manage-keys" class="page hidden">
                <div class="card-box" style="max-width: 900px; text-align: left;">
                    <h2>Manage Keys</h2>
                    <!-- NOUVEL ÉLÉMENT POUR LES MESSAGES DE STATUT D'ADMINISTRATION -->
                    <div id="admin-status-message" class="status-message hidden"></div>
                    <div id="admin-key-list"></div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
