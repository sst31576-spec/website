<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KingGen Web</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="/assets/logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="login-container" class="view-container">
        <div class="card-box">
            <img src="/assets/logo.png" alt="Logo" class="logo">
            <h1>Welcome to KingGen HUB</h1>
            <p>Please connect with Discord to continue.</p>
            <a href="/auth/discord" class="discord-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" class="icon"><path fill="currentColor" d="M20.317 4.431c-1.457-.793-3.04-1.28-4.707-1.42-.14.417-.27.83-.393 1.243-1.84-.277-3.72-.277-5.552 0-.12-.413-.253-.826-.394-1.243-1.667.14-3.25.627-4.707 1.42C.802 11.233-.564 15.66.24 19.34c3.414 2.1 6.83 2.106 10.232 0 .804-3.68 5.707-8.107 9.845-14.909zM15.4 16.59c-.99.53-2.093.53-3.084 0-.113.394-.236.788-.367 1.182.88.2 1.76.2 2.64 0 .02-.417.153-.834.33-1.182zM12 17.65c-.88-.2-1.76-.2-2.64 0-.177.348-.307.765-.33 1.182.99.53 2.093.53 3.084 0 .12-.394.243-.788.367-1.182zM12 16.632c-1.84.34-3.68.34-5.52 0-.25-.806-.38-1.64-.38-2.51 0-3.37 2.92-6.102 6.5-6.102s6.5 2.73 6.5 6.102c0 .87-.13 1.704-.38 2.51-1.84.34-3.68.34-5.52 0zM12 7.74c1.155 0 2.097.94 2.097 2.097s-.94 2.097-2.097-2.097-2.097-.94-2.097-2.097.94-2.097 2.097-2.097z"/></svg>
                Connect with Discord
            </a>
            <p id="login-error-message" class="error-message"></p>
        </div>
    </div>

    <div id="main-app" class="view-container hidden">
        <header class="top-bar">
            <div class="top-bar-left">
                <img src="/assets/logo.png" alt="Logo" class="header-logo">
                <nav>
                    <a href="/" class="nav-link active" data-page="home">Home</a>
                    <a href="/get-key" class="nav-link" data-page="get-key">Get Key</a>
                    <a href="/suggestion" class="nav-link" data-page="suggestion">Suggestion</a>
                    <a href="https://www.roblox.com/games/96049156219003/Key-Access" class="nav-link" target="_blank">Buy Perm</a>
                    <a href="/earn-time" class="nav-link" data-page="earn-time">Earn Time</a>
                </nav>
            </div>
            <div class="top-bar-right">
                <span id="user-status-badge" class="status-badge free">Free</span>
                <div class="user-profile" id="user-profile-toggle">
                    <span id="user-name">User</span>
                    <img id="user-avatar" src="/assets/logo.png" alt="Avatar">
                </div>
                <div class="dropdown-content" id="dropdown-menu">
                    <div id="mobile-nav-links"></div>
                    <a href="/manage-keys" id="manage-keys-link" class="hidden">Admin Panel</a>
                    <a href="/auth/logout">Logout</a>
                </div>
            </div>
        </header>

        <main class="content">
            <div id="page-home" class="page">
                 <div class="card-box">
                    <h2>Welcome back, <span id="home-username"></span>!</h2>
                    <p>We hope you enjoy the script.</p>
                    <a href="/get-key" class="discord-btn" style="background-color: var(--brand-green);">Get Your Key Now</a>
                </div>
            </div>

            <div id="page-get-key" class="page hidden">
                <div class="card-box">
                    <h2>Get Your Key</h2>
                    <div id="key-generation-content"></div>
                </div>
            </div>

            <div id="page-suggestion" class="page hidden">
                <div class="card-box">
                    <h2>Suggestions</h2>
                    <p>Have an idea to improve our script? Let us know below!</p>
                    <form id="suggestion-form">
                        <input type="text" id="game-name-input" placeholder="Game Name (e.g., Blox Fruits)" required>
                        <input type="url" id="game-link-input" placeholder="Roblox Game Link (e.g., https://www.roblox.com/games/...)" required>
                        <textarea id="suggestion-textarea" placeholder="Type your detailed suggestion here..." required></textarea>
                        <button type="submit" class="discord-btn">Send Suggestion</button>
                        <div id="suggestion-status" class="status-message"></div>
                    </form>
                </div>
            </div>
            
            <div id="page-manage-keys" class="page hidden">
                <div class="card-box" style="max-width: 900px; text-align: left;">
                    <h2>Manage Keys</h2>
                    <div class="admin-controls">
                        <input type="search" id="admin-search-input" placeholder="Search by key or username..." autocomplete="off">
                        <button id="remove-expired-btn" class="secondary-btn-red">Remove All Expired</button>
                    </div>
                    <div id="admin-key-list"></div>
                </div>
            </div>

            <div id="page-earn-time" class="page hidden">
                <div class="card-box">
                    <h2>King Clicker</h2>
                    <p>Build your empire, raise an army, and conquer your rivals.</p>
                    <div id="earn-time-content">
                        <p>Loading your empire...</p>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <div id="leaderboard-modal" class="modal-overlay hidden">
        <div class="modal-content card-box" style="max-width: 900px; text-align: left;">
            <button class="modal-close-btn">&times;</button>
            <h2>Leaderboard</h2>
            <div id="leaderboard-controls">
                <button class="secondary-btn active" data-sort="power">Power</button>
                <button class="secondary-btn" data-sort="coins">Coins</button>
                <button class="secondary-btn" data-sort="prestige">Prestige</button>
            </div>
            <div id="leaderboard-container">
                <p>Loading leaderboard...</p>
            </div>
        </div>
    </div>


    <script src="app.js"></script>
</body>
</html>
